<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sin conexión - PlataMX</title>
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#2D3277">
  <meta name="theme-color" content="#121212" media="(prefers-color-scheme: dark)">
  <style>
    /* Fallback for browsers that do not support theme-color */
    html, body {
      background-color: #2D3277;
    }
    @media (prefers-color-scheme: dark) {
      html, body {
        background-color: #121212;
      }
    }
    @media (prefers-color-scheme: light), (prefers-color-scheme: no-preference) {
      html, body {
        background-color: #2D3277;
      }
    }
  </style>
  <link rel="icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background-color: #f5f5f5;
      color: #333;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    
    header {
      background-color: #2D3277;
      color: white;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .logo {
      max-width: 150px;
      margin: 0 auto;
    }
    
    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      text-align: center;
    }
    
    .offline-container {
      max-width: 500px;
      background-color: white;
      border-radius: 8px;
      padding: 2rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .offline-icon {
      width: 100px;
      height: 100px;
      margin: 0 auto 1.5rem;
    }
    
    h1 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: #2D3277;
    }
    
    p {
      margin-bottom: 1.5rem;
      line-height: 1.5;
      color: #555;
    }
    
    .button {
      display: inline-block;
      background-color: #2D3277;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 4px;
      text-decoration: none;
      font-weight: 500;
      transition: background-color 0.2s;
    }
    
    .button:hover {
      background-color: #1A1F4D;
    }
    
    .cached-content {
      margin-top: 2rem;
      width: 100%;
    }
    
    .cached-title {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      color: #2D3277;
    }
    
    .cached-list {
      list-style: none;
      text-align: left;
    }
    
    .cached-item {
      padding: 0.75rem;
      border-bottom: 1px solid #eee;
    }
    
    .cached-item:last-child {
      border-bottom: none;
    }
    
    .cached-link {
      color: #2D3277;
      text-decoration: none;
      display: flex;
      align-items: center;
    }
    
    .cached-link:hover {
      text-decoration: underline;
    }
    
    .cached-icon {
      width: 24px;
      height: 24px;
      margin-right: 0.5rem;
    }
    
    footer {
      background-color: #2D3277;
      color: white;
      text-align: center;
      padding: 1rem;
      font-size: 0.875rem;
    }
    
    @media (prefers-color-scheme: dark) {
      body {
        background-color: #121212;
        color: #f5f5f5;
      }
      
      .offline-container {
        background-color: #1E1E1E;
      }
      
      h1 {
        color: #4A5BDC;
      }
      
      p {
        color: #AAAAAA;
      }
      
      .cached-title {
        color: #4A5BDC;
      }
      
      .cached-item {
        border-bottom: 1px solid #333;
      }
      
      .cached-link {
        color: #4A5BDC;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="/images/logo.png" alt="PlataMX Logo" class="logo">
  </header>
  
  <main>
    <div class="offline-container">
      <svg class="offline-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2D3277">
        <path d="M0 0h24v24H0z" fill="none"/>
        <path d="M23.64 7c-.45-.34-4.93-4-11.64-4-1.5 0-2.89.19-4.15.48L14 9.65V8c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1v1.65l5.12 5.12c.31-.07.62-.12.94-.12 2.48 0 4.5 2.02 4.5 4.5 0 .32-.05.63-.12.94l2.12 2.12c.29-1.26.48-2.65.48-4.15 0-6.71-3.66-11.19-4-11.64C16.67 6.12 17 5.58 17 5c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1 0 .58.33 1.12.88 1.88-.2.2-.4.42-.59.65L2.12 1.36c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L22.59 22.65c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L20.13 17.37zM7 6.07c-.83.37-1.62.8-2.34 1.31-.41.28-.54.82-.26 1.23.28.41.82.54 1.23.26.63-.43 1.32-.8 2.05-1.11L7 6.07zm-5.36 8.56c-.28.4-.17.95.24 1.23.14.1.3.14.46.14.28 0 .56-.13.74-.36.11-.17.23-.33.34-.5.34-.5.76-.93 1.23-1.3l-1.55-1.55c-.53.6-1.01 1.28-1.39 2.03l-.07.31z"/>
      </svg>
      
      <h1>Sin conexión a Internet</h1>
      
      <p>No pudimos cargar la página que solicitaste porque no tienes conexión a Internet. Verifica tu conexión e intenta nuevamente.</p>
      
      <a href="/" class="button">Reintentar</a>
      
      <div class="cached-content">
        <h2 class="cached-title">Contenido disponible sin conexión</h2>
        
        <ul class="cached-list">
          <li class="cached-item">
            <a href="/" class="cached-link">
              <svg class="cached-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2D3277">
                <path d="M0 0h24v24H0z" fill="none"/>
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
              </svg>
              Inicio
            </a>
          </li>
          <li class="cached-item">
            <a href="/cart" class="cached-link">
              <svg class="cached-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2D3277">
                <path d="M0 0h24v24H0z" fill="none"/>
                <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
              </svg>
              Mi carrito
            </a>
          </li>
          <li class="cached-item">
            <a href="/account/favorites" class="cached-link">
              <svg class="cached-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2D3277">
                <path d="M0 0h24v24H0z" fill="none"/>
                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
              </svg>
              Favoritos
            </a>
          </li>
          <li class="cached-item">
            <a href="/account" class="cached-link">
              <svg class="cached-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2D3277">
                <path d="M0 0h24v24H0z" fill="none"/>
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
              </svg>
              Mi cuenta
            </a>
          </li>
        </ul>
      </div>
    </div>
  </main>
  
  <footer>
    &copy; 2023 PlataMX. Todos los derechos reservados.
  </footer>
  
  <script>
    // Check if we're in a service worker context
    if ('serviceWorker' in navigator) {
      // Update the cached content list with actually cached pages
      caches.open('platamx-cache-v1').then(cache => {
        cache.keys().then(requests => {
          const cachedList = document.querySelector('.cached-list');
          
          // Clear the default list
          cachedList.innerHTML = '';
          
          // Filter out non-HTML requests and limit to 5 items
          const htmlRequests = requests
            .filter(request => request.url.endsWith('.html') || request.url.endsWith('/'))
            .slice(0, 5);
          
          if (htmlRequests.length === 0) {
            cachedList.innerHTML = '<li class="cached-item">No hay páginas disponibles sin conexión</li>';
            return;
          }
          
          // Add each cached page to the list
          htmlRequests.forEach(request => {
            const url = new URL(request.url);
            let label = url.pathname === '/' ? 'Inicio' : url.pathname.split('/').pop();
            
            // Clean up the label
            if (label.endsWith('.html')) {
              label = label.replace('.html', '');
            }
            label = label.charAt(0).toUpperCase() + label.slice(1);
            
            // Create icon based on the path
            let icon = '<svg class="cached-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2D3277"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg>';
            
            if (url.pathname === '/') {
              icon = '<svg class="cached-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2D3277"><path d="M0 0h24v24H0z" fill="none"/><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>';
            } else if (url.pathname.includes('cart')) {
              icon = '<svg class="cached-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2D3277"><path d="M0 0h24v24H0z" fill="none"/><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/></svg>';
            } else if (url.pathname.includes('product')) {
              icon = '<svg class="cached-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2D3277"><path d="M0 0h24v24H0z" fill="none"/><path d="M18.06 22.99h1.66c.84 0 1.53-.64 1.63-1.46L23 5.05h-5V1h-1.97v4.05h-4.97l.3 2.34c1.71.47 3.31 1.32 4.27 2.26 1.44 1.42 2.43 2.89 2.43 5.29v8.05zM1 21.99V21h15.03v.99c0 .55-.45 1-1.01 1H2.01c-.56 0-1.01-.45-1.01-1zm15.03-7c0-8-15.03-8-15.03 0h15.03zM1.02 17h15v2h-15z"/></svg>';
            } else if (url.pathname.includes('account') || url.pathname.includes('profile')) {
              icon = '<svg class="cached-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2D3277"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg>';
            } else if (url.pathname.includes('search')) {
              icon = '<svg class="cached-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2D3277"><path d="M0 0h24v24H0z" fill="none"/><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>';
            }
            
            const listItem = document.createElement('li');
            listItem.className = 'cached-item';
            listItem.innerHTML = `
              <a href="${url.pathname}" class="cached-link">
                ${icon}
                ${label}
              </a>
            `;
            
            cachedList.appendChild(listItem);
          });
        });
      });
    }
    
    // Retry button functionality
    document.querySelector('.button').addEventListener('click', (e) => {
      e.preventDefault();
      window.location.reload();
    });
  </script>
</body>
</html>